<script setup lang="ts">
import { ref } from 'vue';
import LkSteps from '@/uni_modules/lucky-ui/components/lk-steps/lk-steps.vue';
import LkButton from '@/uni_modules/lucky-ui/components/lk-button/lk-button.vue';
import DemoBlock from '@/uni_modules/lucky-ui/components/demo-block/demo-block.vue';
import type { StepCardItem } from '@/uni_modules/lucky-ui/components/lk-steps/steps.props';

// â”€â”€ Story æ¨¡å¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const storyCurrent = ref(0);
const storyItems: StepCardItem[] = [
  {
    title: 'å‘ç°ä½ çš„é£æ ¼',
    subtitle: 'ä¸ªæ€§åŒ–æ¨èï¼Œåªå±äºä½ ',
    description: 'æˆ‘ä»¬æ ¹æ®ä½ çš„åå¥½ä¸ºä½ ç²¾é€‰å†…å®¹ï¼Œè®©æ¯ä¸€æ¬¡å‘ç°éƒ½æ°åˆ°å¥½å¤„ã€‚',
    icon: 'compass',
    gradient: ['#6965db', '#a78bfa'],
    tag: 'ç¬¬ä¸€æ­¥',
  },
  {
    title: 'è¿æ¥ä½ çš„ä¸–ç•Œ',
    subtitle: 'ä¸€é”®åŒæ­¥æ‰€æœ‰è®¾å¤‡',
    description: 'æ— è®ºæ‰‹æœºã€å¹³æ¿è¿˜æ˜¯ç”µè„‘ï¼Œä½ çš„æ•°æ®å§‹ç»ˆè§¦æ‰‹å¯åŠï¼Œéšæ—¶éšåœ°ç»§ç»­å·¥ä½œã€‚',
    icon: 'link',
    gradient: ['#0ea5e9', '#38bdf8'],
    tag: 'ç¬¬äºŒæ­¥',
  },
  {
    title: 'å¼€å¯æ— é™å¯èƒ½',
    subtitle: 'è§£é”å…¨éƒ¨é«˜çº§åŠŸèƒ½',
    description: 'è¶…è¿‡ 50 é¡¹ä¸“ä¸šåŠŸèƒ½ç­‰ä½ æ¢ç´¢ï¼Œæå‡æ•ˆç‡ï¼Œè®©åˆ›æ„è‡ªç”±æµæ·Œã€‚',
    icon: 'star',
    gradient: ['#f59e0b', '#fbbf24'],
    tag: 'ç¬¬ä¸‰æ­¥',
  },
  {
    title: 'ä¸€åˆ‡å°±ç»ªï¼',
    subtitle: 'æ¬¢è¿åŠ å…¥æˆ‘ä»¬',
    description: 'ä½ å·²å®Œæˆæ‰€æœ‰è®¾ç½®ã€‚ç°åœ¨å¼€å§‹ä½ çš„ä¸“å±ä½“éªŒä¹‹æ—…å§ï¼',
    icon: 'check-circle',
    gradient: ['#10b981', '#34d399'],
    tag: 'å®Œæˆ',
  },
];

// â”€â”€ Stack æ¨¡å¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const stackCurrent = ref(0);
const stackItems: StepCardItem[] = [
  {
    title: 'åˆ›å»ºä½ çš„è´¦æˆ·',
    subtitle: 'åªéœ€ 30 ç§’',
    description: 'å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œå¼€å¯ä½ çš„ä¸“å±ç©ºé—´ã€‚æˆ‘ä»¬æ‰¿è¯ºä¸å‘é€åƒåœ¾é‚®ä»¶ã€‚',
    icon: 'user',
    tag: 'STEP 01',
  },
  {
    title: 'å®Œå–„ä¸ªäººèµ„æ–™',
    subtitle: 'è®©ä»–äººæ›´äº†è§£ä½ ',
    description: 'ä¸Šä¼ å¤´åƒã€å¡«å†™ç®€ä»‹ï¼Œæ‰“é€ ä½ çš„ä¸“å±èº«ä»½æ ‡è¯†ï¼Œè®©åä½œæ›´é«˜æ•ˆã€‚',
    icon: 'edit-3',
    tag: 'STEP 02',
  },
  {
    title: 'é€‰æ‹©ä½ çš„è®¡åˆ’',
    subtitle: 'å…è´¹å¼€å§‹ï¼Œéšæ—¶å‡çº§',
    description: 'åŸºç¡€åŠŸèƒ½æ°¸ä¹…å…è´¹ã€‚å‡çº§ Pro è®¡åˆ’å¯è§£é”æ— é™å­˜å‚¨å’Œé«˜çº§åä½œå·¥å…·ã€‚',
    icon: 'package',
    tag: 'STEP 03',
  },
  {
    title: 'é‚€è¯·å›¢é˜Ÿæˆå‘˜',
    subtitle: 'åä½œä»è¿™é‡Œå¼€å§‹',
    description: 'åˆ†äº«é‚€è¯·é“¾æ¥ï¼Œä½ çš„å›¢é˜Ÿå°†åœ¨å‡ ç§’å†…åŠ å…¥ã€‚æ¯é‚€è¯·ä¸€äººï¼ŒåŒæ–¹å„è· 30 å¤©ä¼šå‘˜ã€‚',
    icon: 'users',
    tag: 'STEP 04',
  },
];
</script>

<template>
  <view class="component-demo">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• Story æ¨¡å¼ â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <demo-block title="Story å¼è¿›åº¦å¡ç‰‡" description="ç‚¹å‡»å·¦ä¾§å›é€€ï¼Œå³ä¾§å‰è¿›ã€‚autoplay è‡ªåŠ¨æ’­æ”¾ã€‚">
      <lk-steps
        v-model:current="storyCurrent"
        type="story"
        :items="storyItems"
        :card-height="760"
        :autoplay="4000"
      />
      <view class="btn-row">
        <lk-button size="sm" variant="outline" :disabled="storyCurrent === 0" @click="storyCurrent--">ä¸Šä¸€æ­¥</lk-button>
        <lk-button size="sm" variant="solid" :disabled="storyCurrent === storyItems.length - 1" @click="storyCurrent++">ä¸‹ä¸€æ­¥</lk-button>
      </view>
    </demo-block>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• Stack å±‚å å¡ç‰‡ â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <demo-block title="å±‚å å¡ç‰‡æ­¥éª¤" description="å¡ç‰‡å †å åœ¨ä¸€èµ·ï¼Œå®Œæˆåå‘å³ä¸Šæ–¹å¼¹èµ°ã€‚">
      <lk-steps
        v-model:current="stackCurrent"
        type="stack"
        :items="stackItems"
        :card-height="520"
      >
        <template #actions="{ goNext, goPrev, current: c, total: t }">
          <view class="stack-actions">
            <lk-button
              v-if="c > 0"
              size="sm"
              variant="text"
              @click="goPrev"
            >
              è¿”å›
            </lk-button>
            <lk-button
              size="sm"
              variant="solid"
              :style="{ flex: 1 }"
              @click="goNext"
            >
              {{ c === t - 1 ? 'å®Œæˆ ğŸ‰' : 'ä¸‹ä¸€æ­¥' }}
            </lk-button>
          </view>
          <view class="stack-dots">
            <view
              v-for="(_, idx) in stackItems"
              :key="idx"
              class="stack-dot"
              :class="{ 'is-active': idx === c }"
            />
          </view>
        </template>
      </lk-steps>
    </demo-block>


  </view>
</template>

<style scoped lang="scss">
.component-demo {
  display: flex;
  flex-direction: column;
  gap: 24rpx;
}

.btn-row {
  display: flex;
  gap: 16rpx;
  margin-top: 32rpx;
  justify-content: center;
}

.stack-actions {
  display: flex;
  gap: 16rpx;
  align-items: center;
}

.stack-dots {
  display: flex;
  gap: 12rpx;
  justify-content: center;
  margin-top: 20rpx;
}

.stack-dot {
  width: 12rpx;
  height: 12rpx;
  border-radius: 999rpx;
  background: var(--lk-fill-2);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

  &.is-active {
    width: 32rpx;
    background: var(--lk-color-primary);
  }
}
</style>
