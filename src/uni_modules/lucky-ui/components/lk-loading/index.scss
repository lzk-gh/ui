@use '../../theme/src/mixins/bem' as *;

@include b(loading) {
  display: inline-flex;
  align-items: center;
  gap: var(--lk-spacing-xs);
  color: var(--lk-color-text-secondary);
  // 默认使用中性灰色，而不是品牌色
  --_color: var(--lk-loading-spinner);

  @include e(text) {
    font-size: 24rpx;
  }

  @include e(spinner) {
    border: 6rpx solid rgba(0, 0, 0, 0.06);
    border-top-color: var(--_color);
    border-radius: 50%;
    animation: lk-spin 0.8s linear infinite;
    display: inline-block;
    box-sizing: border-box;
  }

  @include e(dots) {
    display: inline-flex;
    align-items: center;
    gap: 10rpx;

    .dot {
      width: 16rpx;
      height: 16rpx;
      border-radius: 50%;
      background: var(--_color);
      animation: lk-dots 0.9s ease-in-out infinite;

      &:nth-child(2) {
        animation-delay: 0.15s;
      }

      &:nth-child(3) {
        animation-delay: 0.3s;
      }
    }
  }

  @include e(bar) {
    position: relative;
    height: 12rpx;
    background: var(--lk-color-fill-tertiary);
    border-radius: 12rpx;
    overflow: hidden;
    width: 160rpx;

    .bar-indicator {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 40%;
      background: var(--_color);
      animation: lk-bar 1.2s ease-in-out infinite;
      border-radius: inherit;
    }
  }

  @include e(bounce) {
    display: inline-flex;
    align-items: center;
    gap: var(--lk-spacing-xxs);

    .bounce-ball {
      width: 20rpx;
      height: 20rpx;
      border-radius: 50%;
      background: var(--_color);
      animation: lk-bounce 1.2s ease-in-out infinite;

      &:nth-child(2) {
        animation-delay: 0.1s;
      }

      &:nth-child(3) {
        animation-delay: 0.2s;
      }
    }
  }

  @include e(wave) {
    display: inline-flex;
    align-items: flex-end;
    gap: 6rpx;

    .wave-bar {
      width: 12rpx;
      height: 100%;
      background: var(--_color);
      border-radius: 6rpx;
      animation: lk-wave 1.2s ease-in-out infinite;

      &:nth-child(2) {
        animation-delay: 0.1s;
      }

      &:nth-child(3) {
        animation-delay: 0.2s;
      }

      &:nth-child(4) {
        animation-delay: 0.3s;
      }

      &:nth-child(5) {
        animation-delay: 0.4s;
      }
    }
  }

  @include e(ring) {
    border: 4rpx solid rgba(0, 0, 0, 0.06);
    border-top-color: var(--_color);
    border-radius: 50%;
    animation: lk-spin 0.8s linear infinite;
    display: inline-block;
    box-sizing: border-box;
  }

  @include e(ellipsis) {
    display: inline-flex;
    align-items: center;
    gap: var(--lk-spacing-xxs);

    .ellipsis-dot {
      width: 12rpx;
      height: 12rpx;
      border-radius: 50%;
      background: var(--_color);
      animation: lk-ellipsis 1.4s ease-in-out infinite;

      &:nth-child(2) {
        animation-delay: 0.16s;
      }

      &:nth-child(3) {
        animation-delay: 0.32s;
      }
    }
  }

  @include e(text-shine) {
    .loading-text {
      font-size: 32rpx;
      font-weight: 600;
      background: linear-gradient(
        120deg,
        #452d8f 20%,
        #a18ae7 30%,
        #ffffff 40%,
        #a18ae7 50%,
        #452d8f 60%
      );
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      white-space: nowrap;
      background-size: 200% auto;
      animation: lk-shine 3s linear infinite;
    }
  }

  @include when(vertical) {
    flex-direction: column;
    gap: var(--lk-spacing-xxs);
  }
}
