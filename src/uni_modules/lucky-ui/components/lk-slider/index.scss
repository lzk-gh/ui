@use '../../theme/src/mixins/bem' as *;

@include b(slider) {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  height: 60rpx;
  user-select: none;
  touch-action: none;

  --lk-slider-track-height: 6rpx;
  --lk-slider-thumb-size: 32rpx;
  --lk-slider-thumb-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);
  --lk-slider-active-bg: var(--lk-color-primary);
  --lk-slider-inactive-bg: var(--lk-color-fill-tertiary);

  // 小号
  @include m(small) {
    --lk-slider-track-height: 4rpx;
    --lk-slider-thumb-size: 24rpx;
  }

  // 大号
  @include m(large) {
    --lk-slider-track-height: 10rpx;
    --lk-slider-thumb-size: 44rpx;
  }

  @include e(track-container) {
    position: relative;
    flex: 1;
    height: 100%;
    display: flex;
    align-items: center;
    cursor: pointer;
  }

  @include e(track) {
    width: 100%;
    height: var(--lk-slider-track-height);
    background: var(--lk-slider-inactive-bg);
    border-radius: 999px;
  }

  // --- 新增：间断点样式 ---
  @include e(stop) {
    position: absolute;
    height: var(--lk-slider-track-height);
    width: var(--lk-slider-track-height); // 正方形点，或者是 height 的 100%
    border-radius: 50%;
    background-color: var(--lk-color-text-inverse, #fff);
    opacity: 0.6;
    transform: translateX(-50%); // 居中
    pointer-events: none; // 不影响点击
    z-index: 0; // 在 bar 之下，track 之上? 通常需要在 bar 之上显示出来才明显，或者反色
    // 如果想要类似 ElementUI 那种效果 (未激活是圆点，激活被覆盖)
    // 简单做法：设为背景色的对比色
  }
  // -----------------------

  @include e(bar) {
    position: absolute;
    height: var(--lk-slider-track-height);
    background: var(--lk-slider-active-bg);
    border-radius: 999px;
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.5, 1);
    z-index: 1; // 盖住默认的 stop
  }

  @include e(thumb-wrapper) {
    position: absolute;
    top: 50%;
    transform: translate3d(-50%, -50%, 0);
    display: flex;
    justify-content: center;
    align-items: center;
    transition: left 0.2s cubic-bezier(0.25, 0.8, 0.5, 1);
    z-index: 2;
  }

  @include e(thumb) {
    width: var(--lk-slider-thumb-size);
    height: var(--lk-slider-thumb-size);
    border-radius: 50%;
    background: #fff;
    box-shadow: var(--lk-slider-thumb-shadow);
    transition: transform 0.2s;
  }

  @include e(value) {
    margin-left: 24rpx;
    font-size: 26rpx;
    color: var(--lk-color-text-secondary);
  }

  @include when(dragging) {
    @include e(thumb) {
      transform: scale(1.2);
    }
  }

  @include when(disabled) {
    opacity: 0.5;
    pointer-events: none;
  }
}
