/* =============================================================================
   Lucky UI 统一主题变量
   =============================================================================
   设计原则：
   1. 所有变量统一使用 --lk-* 前缀
   2. 通过 .lk-theme-light / .lk-theme-dark 类切换主题（兼容小程序）
   3. 品牌色支持运行时动态修改
   ============================================================================= */

@use './tokens/colors' as colors;
@use './tokens/typography' as typo;
@use './tokens/spacing' as spacing;

/* =============================================================================
   基础变量（不随主题变化）
   ============================================================================= */
:root,
page {
  /* === 字体 === */
  --lk-font-family: #{typo.$font-family-base};
  --lk-font-family-code: #{typo.$font-family-code};

  /* === 字号 === */
  --lk-font-size-xs: #{typo.$font-size-xs};
  --lk-font-size-sm: #{typo.$font-size-sm};
  --lk-font-size-base: #{typo.$font-size-base};
  --lk-font-size-md: #{typo.$font-size-base};
  --lk-font-size-lg: #{typo.$font-size-lg};
  --lk-font-size-xl: #{typo.$font-size-xl};
  --lk-font-size-xxl: #{typo.$font-size-xxl};

  /* === 字重 === */
  --lk-font-weight-light: #{typo.$font-weight-light};
  --lk-font-weight-regular: #{typo.$font-weight-regular};
  --lk-font-weight-medium: #{typo.$font-weight-medium};
  --lk-font-weight-bold: #{typo.$font-weight-bold};

  /* === 行高 === */
  --lk-line-height-base: #{typo.$line-height-base};
  --lk-line-height-tight: #{typo.$line-height-tight};
  --lk-line-height-loose: #{typo.$line-height-loose};

  /* === 间距 === */
  --lk-spacing-xxs: 4rpx;
  --lk-spacing-xs: 8rpx;
  --lk-spacing-sm: 12rpx;
  --lk-spacing-md: 16rpx;
  --lk-spacing-lg: 24rpx;
  --lk-spacing-xl: 32rpx;
  --lk-spacing-xxl: 48rpx;

  /* === 圆角 === */
  --lk-radius-none: 0;
  --lk-radius-xs: 4rpx;
  --lk-radius-sm: 8rpx;
  --lk-radius-md: 16rpx;
  --lk-radius-lg: 24rpx;
  --lk-radius-xl: 32rpx;
  --lk-radius-full: 9999px;

  /* === 控件高度 === */
  --lk-control-height-xs: 48rpx;
  --lk-control-height-sm: 64rpx;
  --lk-control-height-md: 80rpx;
  --lk-control-height-lg: 96rpx;

  /* === 控件内边距 === */
  --lk-control-padding-x-xs: 12rpx;
  --lk-control-padding-x-sm: 16rpx;
  --lk-control-padding-x-md: 24rpx;
  --lk-control-padding-x-lg: 32rpx;

  /* === 过渡动画 === */
  --lk-transition-fast: 0.15s ease;
  --lk-transition-base: 0.25s ease;
  --lk-transition-slow: 0.35s ease;

  /* === 层级 (Z-Index) === */
  /* 导航层 */
  --lk-z-index-sticky: 100;
  --lk-z-index-navbar: 200;
  --lk-z-index-tabbar: 300;
  --lk-z-index-fab: 400;

  /* 弹出层（不带遮罩） */
  --lk-z-index-dropdown: 500;
  --lk-z-index-tooltip: 600;
  --lk-z-index-popover: 700;

  /* 遮罩层 */
  --lk-z-index-overlay: 900;

  /* 模态层（带遮罩） */
  --lk-z-index-popup: 1000;
  --lk-z-index-modal: 1500;

  /* 消息层 */
  --lk-z-index-toast: 2000;
  --lk-z-index-notify: 2100;
  --lk-z-index-loading: 2200;

  /* === 品牌色（支持运行时覆盖）=== */
  --lk-brand-100: #{colors.$color-brand-100};
  --lk-brand-200: #{colors.$color-brand-200};
  --lk-brand-300: #{colors.$color-brand-300};
  --lk-brand-400: #{colors.$color-brand-400};
  --lk-brand-500: #{colors.$color-brand-500};
  --lk-brand-600: #{colors.$color-brand-600};
  --lk-brand-700: #{colors.$color-brand-700};
  --lk-brand-800: #{colors.$color-brand-800};
  --lk-brand-900: #{colors.$color-brand-900};
}

/* =============================================================================
   亮色主题（默认）
   ============================================================================= */
:root,
page,
.lk-theme-light {
  /* === 主色 === */
  --lk-color-primary: var(--lk-brand-600);
  --lk-color-primary-hover: var(--lk-brand-700);
  --lk-color-primary-active: var(--lk-brand-800);
  --lk-color-primary-soft: var(--lk-brand-100);

  /* === 语义色 === */
  --lk-color-success: #52c41a;
  --lk-color-success-soft: #f6ffed;
  --lk-color-warning: #faad14;
  --lk-color-warning-soft: #fffbe6;
  --lk-color-danger: #ff4d4f;
  --lk-color-danger-soft: #fff2f0;
  --lk-color-info: #1890ff;
  --lk-color-info-soft: #e6f7ff;

  /* === 文字（中性色，与品牌色解耦）=== */
  /* 主要文字颜色变量 */
  --lk-text-primary: #{colors.$color-text-primary-light};
  --lk-text-regular: #{colors.$color-text-regular-light};
  --lk-text-secondary: #{colors.$color-text-secondary-light};
  --lk-text-placeholder: #{colors.$color-text-placeholder-light};
  --lk-text-inverse: #{colors.$color-text-inverse-light};

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-text: var(--lk-text-primary);
  --lk-color-text-secondary: var(--lk-text-secondary);
  --lk-color-text-tertiary: #{colors.$color-gray-600};
  --lk-color-text-placeholder: var(--lk-text-placeholder);
  --lk-color-text-disabled: #{colors.$color-text-disabled};
  --lk-color-text-inverse: var(--lk-text-inverse);

  /* === 背景（中性色，与品牌色解耦）=== */
  /* 主要背景颜色变量 */
  --lk-bg-page: #{colors.$color-bg-page-light};
  --lk-bg-container: #{colors.$color-bg-container-light};
  --lk-fill-1: #{colors.$color-fill-1-light};
  --lk-fill-2: #{colors.$color-fill-2-light};

  /* 页面级布局背景（用于组件预览/演示界面，亮色默认使用 page 背景 #f7f7f7） */
  --lk-color-bg-layout: var(--lk-bg-page);

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-bg: var(--lk-bg-page);
  --lk-color-bg-page: var(--lk-bg-page);
  --lk-color-bg-container: var(--lk-bg-container);
  /* 提升层背景：在亮色主题下使用比容器略深的填充色以增强卡片与页面的对比 */
  --lk-color-bg-elevated: var(--lk-fill-1);
  --lk-color-bg-hover: var(--lk-fill-1);
  // 使用新的中性点击叠加色，而不是填充色
  --lk-color-bg-active: var(--lk-bg-active);
  --lk-color-bg-disabled: var(--lk-fill-1);

  /* === 填充色（中性色，与品牌色解耦）=== */
  /* 主要填充颜色变量 */
  --lk-fill-quaternary: #f7f7f7; /* 调整为 #f7f7f7，匹配亮色默认控件背景 */
  --lk-fill-tertiary: #f7f7f7; /* 调整为 #f7f7f7，使滑块/标签等默认背景一致 */
  --lk-fill-secondary: var(--lk-fill-1);
  --lk-fill-primary: var(--lk-fill-2);

  /* === 表单控件填充（Apple 风格 - 统一的输入类控件背景）=== */
  /* 用于 Input、Stepper、Search 等输入类控件的统一背景色 */
  --lk-bg-input: #{colors.$color-bg-input-light};
  --lk-bg-fill-secondary: var(--lk-bg-input); // 别名，向后兼容

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-fill-quaternary: var(--lk-fill-quaternary);
  --lk-color-fill-tertiary: var(--lk-fill-tertiary);
  --lk-color-fill-secondary: var(--lk-bg-input); // 映射到新的控件填充色
  --lk-color-fill-primary: var(--lk-fill-primary);

  /* === 边框 === */
  --lk-color-border: #{colors.$color-border-primary};
  --lk-color-border-light: #{colors.$color-border-secondary};

  /* === 阴影 === */
  --lk-shadow-sm: 0 4rpx 8rpx rgba(0, 0, 0, 0.06);
  --lk-shadow-base: 0 8rpx 24rpx rgba(0, 0, 0, 0.1);
  --lk-shadow-lg: 0 16rpx 48rpx rgba(0, 0, 0, 0.15);

  /* === 交互效果（中性色，与品牌色解耦）=== */
  /* 点击叠加色（使用透明度，适用于任何背景） */
  --lk-bg-active: rgba(0, 0, 0, 0.08);
  --lk-color-ripple: rgba(0, 0, 0, 0.12);
  --lk-color-highlight: rgba(0, 0, 0, 0.04);

  /* === 骨架屏与加载（纯灰色，无色调）=== */
  --lk-skeleton-start: #f0f2f5;
  --lk-skeleton-end: #e1e4e8;
  --lk-loading-spinner: #c8c9cc;

  /* === 图标 === */
  --lk-icon-color: var(--lk-text-primary);

  /* === 输入框 === */
  // 使用统一的控件填充色（Apple 风格）
  --lk-input-bg: var(--lk-bg-input);
  --lk-input-border: var(--lk-color-border);
  --lk-input-border-hover: var(--lk-brand-600);
  --lk-input-border-focus: var(--lk-brand-600);
  --lk-input-shadow-focus: 0 0 0 4rpx var(--lk-brand-100);
}

/* =============================================================================
   暗色主题
   ============================================================================= */
.lk-theme-dark {
  /* === 主色（暗色下调亮）=== */
  --lk-color-primary: var(--lk-brand-500);
  --lk-color-primary-hover: var(--lk-brand-400);
  --lk-color-primary-active: var(--lk-brand-300);
  --lk-color-primary-soft: rgba(var(--lk-brand-rgb, 105, 101, 219), 0.15);

  /* === 语义色（暗色适配）=== */
  --lk-color-success: #73d13d;
  --lk-color-success-soft: rgba(82, 196, 26, 0.15);
  --lk-color-warning: #ffc53d;
  --lk-color-warning-soft: rgba(250, 173, 20, 0.15);
  --lk-color-danger: #ff7875;
  --lk-color-danger-soft: rgba(255, 77, 79, 0.15);
  --lk-color-info: #40a9ff;
  --lk-color-info-soft: rgba(24, 144, 255, 0.15);

  /* === 文字（中性色，与品牌色解耦）=== */
  /* 主要文字颜色变量 */
  --lk-text-primary: #{colors.$color-text-primary-dark};
  --lk-text-regular: #{colors.$color-text-regular-dark};
  --lk-text-secondary: #{colors.$color-text-secondary-dark};
  --lk-text-placeholder: #{colors.$color-text-placeholder-dark};
  --lk-text-inverse: #{colors.$color-text-inverse-dark};

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-text: var(--lk-text-primary);
  --lk-color-text-secondary: var(--lk-text-secondary);
  --lk-color-text-tertiary: rgba(255, 255, 255, 0.45);
  --lk-color-text-placeholder: var(--lk-text-placeholder);
  --lk-color-text-disabled: rgba(255, 255, 255, 0.25);
  --lk-color-text-inverse: var(--lk-text-inverse);

  /* === 背景（中性色，与品牌色解耦）=== */
  /* 主要背景颜色变量 */
  --lk-bg-page: #{colors.$color-bg-page-dark};
  --lk-bg-container: #{colors.$color-bg-container-dark};
  --lk-fill-1: #{colors.$color-fill-1-dark};
  --lk-fill-2: #{colors.$color-fill-2-dark};

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-bg: var(--lk-bg-page);
  --lk-color-bg-page: var(--lk-bg-page);
  --lk-color-bg-container: var(--lk-bg-container);
  --lk-color-bg-elevated: #262626;
  --lk-color-bg-hover: var(--lk-fill-1);
  // 使用新的中性点击叠加色，而不是填充色
  --lk-color-bg-active: var(--lk-bg-active);
  --lk-color-bg-disabled: rgba(255, 255, 255, 0.08);

  /* === 填充色（中性色，与品牌色解耦）=== */
  /* 主要填充颜色变量 */
  --lk-fill-quaternary: rgba(255, 255, 255, 0.04);
  --lk-fill-tertiary: rgba(255, 255, 255, 0.08);
  --lk-fill-secondary: var(--lk-fill-1);
  --lk-fill-primary: var(--lk-fill-2);

  /* === 表单控件填充（Apple 风格 - 统一的输入类控件背景）=== */
  /* 用于 Input、Stepper、Search 等输入类控件的统一背景色 */
  --lk-bg-input: #{colors.$color-bg-input-dark};
  --lk-bg-fill-secondary: var(--lk-bg-input); // 别名，向后兼容

  /* 向后兼容的旧变量名（映射到新的中性色变量） */
  --lk-color-fill-quaternary: var(--lk-fill-quaternary);
  --lk-color-fill-tertiary: var(--lk-fill-tertiary);
  --lk-color-fill-secondary: var(--lk-bg-input); // 映射到新的控件填充色
  --lk-color-fill-primary: var(--lk-fill-primary);

  /* === 边框 === */
  --lk-color-border: rgba(255, 255, 255, 0.2);
  --lk-color-border-light: rgba(255, 255, 255, 0.1);

  /* === 阴影 === */
  --lk-shadow-sm: 0 4rpx 8rpx rgba(0, 0, 0, 0.3);
  --lk-shadow-base: 0 8rpx 24rpx rgba(0, 0, 0, 0.4);
  --lk-shadow-lg: 0 16rpx 48rpx rgba(0, 0, 0, 0.5);

  /* === 交互效果（中性色，与品牌色解耦）=== */
  /* 点击叠加色（使用透明度，适用于任何背景） */
  --lk-bg-active: rgba(255, 255, 255, 0.12);
  --lk-color-ripple: rgba(255, 255, 255, 0.2);
  --lk-color-highlight: rgba(255, 255, 255, 0.08);

  /* === 骨架屏与加载（纯灰色，无色调）=== */
  --lk-skeleton-start: #2c2c2c;
  --lk-skeleton-end: #3d3d3d;
  --lk-loading-spinner: #5d5d5d;

  /* === 图标 === */
  /* 图标默认跟随文字颜色，自动适配暗黑模式 */
  --lk-icon-color: var(--lk-text-primary);

  /* === 输入框 === */
  // 使用统一的控件填充色（Apple 风格）
  --lk-input-bg: var(--lk-bg-input);
  --lk-input-border: var(--lk-color-border);
  --lk-input-border-hover: var(--lk-brand-500);
  --lk-input-border-focus: var(--lk-brand-500);
  --lk-input-shadow-focus: 0 0 0 4rpx rgba(105, 101, 219, 0.25);
}

/* =============================================================================
   兼容旧变量名（逐步废弃，后续版本移除）
   ============================================================================= */
:root,
page,
.lk-theme-light,
.lk-theme-dark {
  /* 背景 */
  --lk-color-bg-surface: var(--lk-color-bg-container);
  --lk-color-bg-surface-active: var(--lk-color-bg-active);
  --lk-color-bg-surface-variant: var(--lk-color-bg-hover);
  --lk-color-bg-body: var(--lk-color-bg);
  --lk-bg-container: var(--lk-color-bg-container);
  --lk-bg-fill: var(--lk-color-bg-hover);
  --lk-bg-disabled: var(--lk-color-bg-disabled);

  /* 边框 */
  --lk-color-border-weak: var(--lk-color-border-light);
  --lk-border-color: var(--lk-color-border);

  /* 主色 */
  --lk-color-primary-bg-soft: var(--lk-color-primary-soft);

  /* 圆角 */
  --lk-radius-pill: var(--lk-radius-full);
}
